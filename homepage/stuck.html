<!DOCTYPE html>

<html lang="en">
    <head>
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-sRIl4kxILFvY47J16cr9ZwB07vP4J8+LH7qKQnuqkuIAvNWLzeN8tE5YBujZqJLB" crossorigin="anonymous">
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/js/bootstrap.bundle.min.js" integrity="sha384-FKyoEForCGlyvwx9Hj09JcYn3nv7wiPVlz7YYwJrWVcXK/BmnVDxM+D2scQbITxI" crossorigin="anonymous"></script>
        <link href="styles.css" rel="stylesheet">
        <title>Stuck</title>
        <script>

            document.addEventListener('DOMContentLoaded', function () {
                let text = document.querySelector('.flavortext');
                // No HTML image areas on this page, create frame variable
                let frame = document.querySelector('.border');
                // Define new flavortexts
                let text1 = `Your headlamp goes out.`;
                let text2 = `The walls begin to close in around you. They feel warm.`;
                let text3 = `You can't move. You're stuck.`;
                // Define button
                const button = document.querySelector('#yes');

                // When "go back" is clicked, trigger new flavortext
                button.addEventListener('click', function () {
                    console.log(text.innerHTML);
                    if (!(text.innerHTML === text3)) {
                        text.innerHTML = `The opening is shut behind you.`;
                    }
                    // Change address to homepage once all dialogue is exhausted
                    else if (text.innerHTML === text3) {
                        button.setAttribute('href', 'index.html');
                    }
                    });

                // Check for user clicks on frame
                frame.addEventListener('click', function () {
                    // First flavortext change
                    text.innerHTML = text1;
                    // Stop displaying image (light goes out)
                    document.querySelector('img').setAttribute('style', 'display: none');
                    // Listen for more clicks for last flavortext options
                    frame.addEventListener('click', function () {
                        if (text.innerHTML === text1) {
                            text.innerHTML = text2;
                        }
                        if (text.innerHTML === text2) {
                            text.innerHTML = text3;
                        }
                        if (text.innerHTML === text3) {
                            button.innerHTML = `Start over`;
                        }
                    });
                });
            });

        </script>
    </head>
    <body>
        <div class="row justify-content-center">
            <div class="col-auto">
                <h2>Crevice</h2>
            </div>
        </div>
       <div class="container">
            <div class="row justify-content-center">
                <div class="frame mb-3 mt-3">
                    <div class="img-container col-auto border border-white" style="cursor: pointer">
                        <img src="images/Stuck.jpg" class="fill" alt="Crevice">
                    </div>
                </div>
            </div>
        </div>
        <hr>
        <div class="w-75 mx-auto flex">
            <p class="flavortext">The opening you stepped through shrinks shut.</p>
            <a class="button" id="yes">Go back</a>
        </div>
    </body>
</html>
